summary: Integration tests for openjdk-21-jdk-headless

environment:
  SLICE/core: "core"
  SLICE/bins: "bins"
  SLICE/modules: "modules"

execute: |
  # Test different slice installations
  echo "SLICE=${SLICE}"
  rootfs="$(install-slices busybox_bins openjdk-21-jdk-headless_${SLICE})"
  (cd ${rootfs}/usr/bin && for applet in $(${rootfs}/usr/bin/busybox --list); do \
      ln -s busybox $applet ; \
    done)
  cp smoke.sh "${rootfs}/"
  chroot ${rootfs} busybox sh /smoke.sh
